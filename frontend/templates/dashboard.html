{% extends 'base.html' %}

{% block title %}Dashboard - Aesthetic LinkWizard{% endblock %}

{% block page_title %}Dashboard{% endblock %}

{% block extra_styles %}
.activity-log {
    max-height: 400px;
    overflow-y: auto;
}
.activity-log::-webkit-scrollbar {
    width: 6px;
}
.activity-log::-webkit-scrollbar-thumb {
    background-color: #bdc3c7;
    border-radius: 3px;
}
.log-info {
    color: #3498DB;
}
.log-success {
    color: #27AE60;
}
.log-error {
    color: #E74C3C;
}
.top-leads-container {
    max-height: 400px;
    overflow-y: auto;
    overflow-x: hidden;
}
.top-leads-container::-webkit-scrollbar {
    width: 8px;
}
.top-leads-container::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 4px;
}
.top-leads-container::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
}
.top-leads-container::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
}
{% endblock %}

{% block content %}
<!-- Dashboard Content -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="bg-white rounded-lg shadow p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-500 text-sm">Total Leads Scraped</p>
                <h3 class="text-2xl font-bold mt-1" id="total-leads">0</h3>
                <p class="text-success text-sm mt-1 flex items-center">
                    <i data-feather="arrow-up" class="w-3 h-3 mr-1"></i> <span id="total-leads-change">0%</span> from last week
                </p>
            </div>
            <div class="bg-blue-100 p-3 rounded-full">
                <i data-feather="user-plus" class="w-5 h-5 text-secondary"></i>
            </div>
        </div>
    </div>
    
    <div class="bg-white rounded-lg shadow p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-500 text-sm">Qualified Leads</p>
                <h3 class="text-2xl font-bold mt-1" id="qualified-leads">0</h3>
                <p class="text-success text-sm mt-1 flex items-center">
                    <i data-feather="arrow-up" class="w-3 h-3 mr-1"></i> <span id="qualified-leads-change">0%</span> from last week
                </p>
            </div>
            <div class="bg-green-100 p-3 rounded-full">
                <i data-feather="check-circle" class="w-5 h-5 text-success"></i>
            </div>
        </div>
    </div>
    
    <div class="bg-white rounded-lg shadow p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-500 text-sm">Messages Sent</p>
                <h3 class="text-2xl font-bold mt-1" id="messages-sent">0</h3>
                <p class="text-warning text-sm mt-1 flex items-center">
                    <i data-feather="arrow-down" class="w-3 h-3 mr-1"></i> <span id="messages-sent-change">0%</span> from last week
                </p>
            </div>
            <div class="bg-yellow-100 p-3 rounded-full">
                <i data-feather="send" class="w-5 h-5 text-warning"></i>
            </div>
        </div>
    </div>
    
    <div class="bg-white rounded-lg shadow p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-500 text-sm">Response Rate</p>
                <h3 class="text-2xl font-bold mt-1" id="response-rate">0%</h3>
                <p class="text-success text-sm mt-1 flex items-center">
                    <i data-feather="arrow-up" class="w-3 h-3 mr-1"></i> <span id="response-rate-change">0%</span> from last week
                </p>
            </div>
            <div class="bg-purple-100 p-3 rounded-full">
                <i data-feather="message-circle" class="w-5 h-5 text-purple-500"></i>
            </div>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <div class="bg-white rounded-lg shadow overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200">
            <h2 class="text-lg font-semibold text-gray-800">Live Activity Feed</h2>
        </div>
        <div class="activity-log p-6">
            <div class="space-y-4" id="activity-feed">
                <p class="text-gray-500 text-center py-4">Loading activity...</p>
            </div>
        </div>
    </div>
    
    <div class="bg-white rounded-lg shadow overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200">
            <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold text-gray-800">Top Qualified Leads</h2>
                <a href="/leads?min_score=70" class="text-secondary hover:text-blue-600 text-sm font-medium">
                    View All â†’
                </a>
            </div>
        </div>
        <div class="top-leads-container p-4">
            <p class="text-gray-500 text-center py-4">Loading leads...</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/dashboard.js"></script>
<script>
    feather.replace();
</script>
{% endblock %}
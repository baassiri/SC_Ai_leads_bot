{% extends 'base.html' %}

{% block title %}Leads Management - SC Lead Generation{% endblock %}

{% block page_title %}Leads Management{% endblock %}

{% block extra_styles %}
<style>
    .lead-checkbox:checked {
        background-color: #3b82f6;
        border-color: #3b82f6;
    }
    .filter-section {
        background: white;
        padding: 1.5rem;
        border-radius: 0.5rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        margin-bottom: 1.5rem;
    }
</style>
{% endblock %}

{% block content %}
<!-- Statistics Cards -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
    <div class="bg-white rounded-lg shadow p-4">
        <p class="text-sm text-gray-600">Total Leads</p>
        <p class="text-2xl font-bold" id="total-leads-count">0</p>
    </div>
    <div class="bg-white rounded-lg shadow p-4">
        <p class="text-sm text-gray-600">Qualified (70+)</p>
        <p class="text-2xl font-bold text-green-600" id="qualified-leads-count">0</p>
    </div>
    <div class="bg-white rounded-lg shadow p-4">
        <p class="text-sm text-gray-600">Contacted</p>
        <p class="text-2xl font-bold text-blue-600" id="contacted-leads-count">0</p>
    </div>
    <div class="bg-white rounded-lg shadow p-4">
        <p class="text-sm text-gray-600">Replied</p>
        <p class="text-2xl font-bold text-purple-600" id="replied-leads-count">0</p>
    </div>
</div>

<!-- Filters Section -->
<div class="filter-section">
    <h3 class="text-lg font-semibold mb-4">Filter Leads</h3>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
            <select id="status-filter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="all">All Statuses</option>
                <option value="new">New</option>
                <option value="contacted">Contacted</option>
                <option value="replied">Replied</option>
                <option value="qualified">Qualified</option>
            </select>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Persona</label>
            <select id="persona-filter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="all">All Personas</option>
            </select>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Min Score</label>
            <input type="number" id="min-score" min="0" max="100" placeholder="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Max Score</label>
            <input type="number" id="max-score" min="0" max="100" placeholder="100" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
    </div>
    <div class="flex space-x-2 mt-4">
        <button id="apply-filters" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md">
            <i data-feather="filter" class="w-4 h-4 inline mr-1"></i> Apply Filters
        </button>
        <button id="reset-filters" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md">
            <i data-feather="x" class="w-4 h-4 inline mr-1"></i> Reset
        </button>
    </div>
</div>

<!-- Action Buttons -->
<div class="bg-white rounded-lg shadow p-4 mb-6">
    <div class="flex flex-wrap gap-3">
        <button id="approve-leads-btn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md flex items-center">
            <i data-feather="check-circle" class="w-4 h-4 mr-2"></i>
            Approve Leads
        </button>
        <button id="archive-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-md flex items-center">
            <i data-feather="archive" class="w-4 h-4 mr-2"></i>
            Archive
        </button>
        <button id="delete-btn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center">
            <i data-feather="trash-2" class="w-4 h-4 mr-2"></i>
            Delete
        </button>
        <button id="export-csv-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md flex items-center">
            <i data-feather="download" class="w-4 h-4 mr-2"></i>
            Export CSV
        </button>
    </div>
</div>

<!-- Leads Table -->
<div class="bg-white rounded-lg shadow overflow-hidden">
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left">
                        <input type="checkbox" id="select-all" class="rounded border-gray-300">
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company</th>
                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">AI Score</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Persona</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
            </thead>
            <tbody id="leadsTableBody" class="bg-white divide-y divide-gray-200">
                <tr>
                    <td colspan="8" class="px-6 py-8 text-center text-gray-500">
                        <div class="flex flex-col items-center">
                            <i data-feather="loader" class="w-12 h-12 mb-2 text-gray-400 animate-spin"></i>
                            <p>Loading leads...</p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/leads.js"></script>
{% endblock %}